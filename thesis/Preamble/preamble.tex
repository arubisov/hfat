% ******************************************************************************
% ****************************** LaTeX Header **********************************
% ******************************************************************************

% ****************************** Custom Margin *********************************
\usepackage{etex}			% An extended version of TEX, controls memory issues.
\usepackage[top=1in, bottom=1in, left=1in, right=1in]{geometry}
\geometry{bindingoffset=0.2in}
\usepackage{enumitem} 		% Control layout of itemize, enumerate, description
\setlength{\parindent}{0 pt}
\setlength{\parskip}{12 pt}

% ******************* Fonts (like different typewriter fonts etc.)*************
\usepackage{amssymb, amsmath, amsthm}
\usepackage{mathtools} 		% Mathematical tools to use with amsmath
\usepackage{dsfont} 		% Doublestroke font
\usepackage{bm} 			% Bold math fonts
%\usepackage{soul} 			 % Hyphenation for letterspacing, underlining, and more
\allowdisplaybreaks

% ************************* Algorithms and Pseudocode **************************
\usepackage{algorithm}
\usepackage{algpseudocode}

% ********************Captions and Hyperreferencing / URL **********************
\usepackage{sidecap} % Typeset captions sideways
\usepackage{subcaption}  % Support for sub-captions
\usepackage{url} % Verbatim with URL-sensitive line breaks
\usepackage[colorlinks = true, linkcolor = blue, urlcolor=blue, citecolor = blue]{hyperref}

% Fixes a problem with how hyperref records item labels
\makeatletter
\let\oldequation\equation
\renewcommand{\equation}{\@hyper@itemfalse\oldequation}
\let\oldgather\gather
\renewcommand{\gather}{\@hyper@itemfalse\oldgather}
\let\oldalign\align
\renewcommand{\align}{\@hyper@itemfalse\oldalign}
\makeatother

% *************************** Graphics and figures *****************************
\usepackage{rotating}
\usepackage{float}
\usepackage{placeins} 	% For creating float barriers so figure don't span sections
%\restylefloat{figure} % Set figure floating, use \begin{figure}[H] to fix in place.

\usepackage{color}					% color!
\usepackage[x11names]{xcolor}		% ?

% figures, links, etc. 
\usepackage{graphicx}
\usepackage{pgfplots}
\usetikzlibrary{backgrounds}	% in order to frame a tikzpic
\usetikzlibrary{external} 		% Externalization library to avoid plot re-generation
\tikzexternalize[prefix=Figs/] % activate
\pgfplotsset{compat=newest} 
\pgfplotsset{plot coordinates/math parser=false} 
\newlength\figureheight 
\newlength\figurewidth 
\DeclareGraphicsExtensions{.jpg}

% ********************************** Tables ************************************
\usepackage{booktabs}
\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}

%\restylefloat{table} % Set table floating, use \begin{table}[H] to fix its position.

\usepackage{multicol}
%\usepackage{multirow}
\usepackage{relsize}	% For \mathsmaller command

% ******************************* Line Spacing *********************************
\usepackage{setspace}
\onehalfspacing

% ************************ Formatting / Footnote *******************************
% Don't break enumeration (etc.) across pages in an ugly manner (default 10000)
%\clubpenalty=500
%\widowpenalty=500

%\usepackage[perpage]{footmisc} %Range of footnote options

% *********** To change the name of Table of Contents / LOF and LOT ************
%\renewcommand{\contentsname}{My Table of Contents}
%\renewcommand{\listfigurename}{My List of Figures}
%\renewcommand{\listtablename}{My List of Tables}

% ********************** TOC depth and numbering depth *************************
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

% ********************************* Appendix ***********************************
\usepackage{appendix}
%\renewcommand{\appendixtocname}{List of appendices}
%\renewcommand{\appendixname}{Appndx}

% ******************************** Todo Notes **********************************
\usepackage{fixme}
\renewcommand\fixmelogo{\textsf{TODO:}}

% ******************************************************************************
% ************************* User Defined Commands ******************************
% ******************************************************************************
% See http://tex.stackexchange.com/questions/1050/whats-the-difference-between-newcommand-and-newcommand for info difference between newcommand and newcommand*

% Changes how \autoref displays the equation reference.
\def\equationautorefname{Equation}
\def\tableautorefname{Table}
\def\figureautorefname{Figure}
\def\subsubsectionautorefname{Subsection}
\def\sectionautorefname{Section}
% Changes how \eqref displays the equation reference.
\let\originaleqref\eqref
\renewcommand{\eqref}{Equation~\originaleqref}
% Note: autoref makes all of the text link-able, while eqref
% inserts an Eq.~ that cannot be clicked, and a number that can. 
%  i.e., denoting links by [['s, autoref gives something like
%  [[Eq. 1]], while eqref gives something like Eq.~[[(1)]]


% helpful stuff
\newcommand{\code}[1]{{\tt #1}}
\newcommand{\e}[1]{\ensuremath{\times 10^{#1}}}
\newcommand{\ie}{\emph{i.e.,~}}
\newcommand{\eg}{\emph{e.g.,~}}
\newcommand{\etc}{\emph{\textit{etc.}}}
%
\newcommand{\irrats}{\ensuremath{\mathbb{R}\setminus\mathbb{Q}}}
\newcommand{\rats}{\ensuremath{\mathbb{Q}}}
\newcommand{\reals}{\ensuremath{\mathbb{R}}}
\newcommand{\nats}{\ensuremath{\mathbb{N}}}
\newcommand{\ints}{\ensuremath{\mathbb{Z}}}
\newcommand{\complex}{\ensuremath{\mathbb{C}}}
\newcommand{\rp}{\ensuremath{\mathbb{RP}}}
\newcommand{\sph}{\ensuremath{\mathbb{S}}}
%
\newcommand{\abs}[1]{\ensuremath{\left|#1\right|}}
\newcommand{\dee}[2]{\ensuremath{\frac{\mathrm{d}#1}{\mathrm{d}#2}}}
\newcommand{\del}[2]{\ensuremath{\frac{\partial#1}{\partial#2}}}
\newcommand{\csch}{\ensuremath{\mathrm{csch}}}
\newcommand{\caret}{\textasciicircum}
\newcommand{\Siotdac}{Suppose, in order to derive a contradiction~}%
\newcommand{\siotdac}{suppose, in order to derive a contradiction~}%
\newcommand{\Wlog}{Without loss of generality~}%
\newcommand{\ts}{\ensuremath{\textstyle}}
\newcommand{\ds}{\ensuremath{\displaystyle}}
% \wlog is already defined by LaTeX for some reason...
%\newcommand{\wlog}{~without loss of generality~}%
\newcommand{\ld}[2]{\ensuremath{#1_1, \ldots, #1_{#2}}}
\newcommand{\ip}[1]{\ensuremath{\langle #1\rangle}}
% matrix commands 
% (are not working for some reason, so commented out)
% \newcommand{\mat3}[3]{\ensuremath{ \left(
%       \begin{array}{ccc}
%         #1 \\
%         #2 \\
%         #3
%       \end{array}
%       \right)}}

% differential
% \let\oldd\d
\renewcommand{\d}{\ensuremath{\,\mathrm{d}}}

\newcommand\pf{\paragraph{\textbf{\textsc{Proof}}}}
\newcommand\soln{\paragraph{\textbf{\textsc{Solution}}}}
\newcommand\fp{\hfill $\blacksquare$}

% amsthm stuff
\newtheorem{thm}{Theorem}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{coro}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{defn}[thm]{Definition}

\DeclareMathOperator{\sgn}{\mathrm{sgn}}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\var}{var}
\DeclareMathOperator{\cor}{cor}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\countup}{1,2,\ldots}
\DeclareMathOperator{\dist}{d}
\DeclareMathOperator{\intr}{int}
\DeclareMathOperator{\fr}{Fr}
\DeclareMathOperator{\cl}{cl}
\DeclareMathOperator{\Ro}{\mathcal{R}_0}
\DeclareMathOperator{\m}{\mathrm{m}}
\DeclareMathOperator{\pr}{\mathrm{pr}}
\DeclareMathOperator{\torus}{{\mathbb{T}^1}}
\DeclareMathOperator{\Res}{\mathrm{Res}}

\setlist[enumerate, 1]{align=left, label=\arabic*.}
\setlist[enumerate, 2]{align=left, label=(\alph*)}

% [label={\bf \arabic*}.][label=(\roman*)] 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Macros

% Math Macros.  It would be better to use the AMS LaTeX package,
% including the Bbb fonts, but I'm showing how to get by with the most
% primitive version of LaTeX.  I follow the naming convention to begin
% user-defined macro and variable names with the prefix "my" to make it
% easier to distiguish user-defined macros from LaTeX commands.
%
\newcommand{\myfunction}[3] {${#1} : {#2} \rightarrow {#3}$ }
\renewcommand{\iff}{\Leftrightarrow}
\newcommand{\pluseq}{\mathrel{+}=}
\newcommand{\mineq}{\mathrel{-}=}
\newcommand{\mat}[1]{\boldsymbol{#1}}
\newcommand{\dens}[1]{f_{\uppercase{#1}}(\lowercase{#1})}
\newcommand{\densc}[2]{f_{\uppercase{#1}|\uppercase{#2}}(\lowercase{#1}|\lowercase{#2})}
\renewcommand{\ds}{\,\mathrm{d}s}
\newcommand{\dt}{\,\mathrm{d}t}
\newcommand{\du}{\,\mathrm{d}u}
\newcommand{\dx}{\,\mathrm{d}x}
\newcommand{\dbx}{\,\mathrm{d}\bx}
\newcommand{\dy}{\,\mathrm{d}y}
\newcommand{\dby}{\,\mathrm{d}\by}
\newcommand{\dz}{\,\mathrm{d}z}
\newcommand{\cov}{\mathrm{cov}}

%--------grstep
% For denoting a Gauss' reduction step.
% From the online linear algebra textbook Linear Algebra by Jim Hefferon
% Use as: \grstep{\rho_1+\rho_3} or \grstep[2\rho_5 \\ 3\rho_6]{\rho_1+\rho_3}
\newcommand{\grstep}[2][\relax]{%
   \ensuremath{\mathrel{
       {\mathop{\longrightarrow}\limits^{#2\mathstrut}_{
           \begin{subarray}{l} #1 \end{subarray}}}}}}
    
\newcommand\undermat[2]{%
  \makebox[0pt][l]{$\smash{\underbrace{\phantom{%
    \begin{matrix}#2\end{matrix}}}_{\text{$#1$}}}$}#2}
    
\newcommand\overmat[2]{%
  \makebox[0pt][l]{$\smash{\overbrace{\phantom{%
    \begin{matrix}#2\end{matrix}}}^{\text{$#1$}}}$}#2}
    
% Augmented matrices
\newenvironment{amatrix}[1]{%
  \left[\begin{array}{@{}*{#1}{c}|c@{}}
}{%
  \end{array}\right]
}

% line break within a table cell
% pass [c] or [b] to align with center or bottom of cell
\newcommand{\cellbreak}[3]{%
  \begin{tabular}[#1]{@{}#2@{}}#3\end{tabular}}

\newcommand{\E}{\mathbb{E}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\renewcommand{\P}{\mathbb{P}}

\newcommand{\bS}{\mathbb{S}}
\newcommand{\ba}{\mathbf{a}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\bc}{\mathbf{c}}
\newcommand{\be}{\mathbf{e}}
\newcommand{\bj}{\mathbf{j}}
\newcommand{\br}{\mathbf{r}}
\newcommand{\bt}{\mathbf{t}}
\newcommand{\bu}{\bm{u}}
\newcommand{\bv}{\mathbf{v}}
\newcommand{\bw}{\mathbf{w}}
\newcommand{\bx}{\bm{x}}
\newcommand{\by}{\bm{y}}
\newcommand{\bz}{\bm{z}}
\newcommand{\bP}{\bm{P}}
\newcommand{\bZ}{\bm{Z}}
\newcommand{\bzero}{\bm{0}}
\newcommand{\bpi}{\bm{\pi}}
\newcommand{\btau}{\bm{\tau}}

\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cL}{\mathcal{L}}

\newcommand{\indicator}{\mathds{1}}